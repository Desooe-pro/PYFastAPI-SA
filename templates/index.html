<!DOCTYPE>
<html lang="fr">
<head>
    <title>MÃ©tÃ©o</title>
    <link href="/static/styles.css" rel="stylesheet">
</head>
<body>
    <h1>Rechercher la mÃ©tÃ©o</h1>

    <!-- Formulaire CP -->
    {% if not communes and not weather or (city and weather) %}
    <form method="post" class="form">
        <label>
            <input
                    type="text"
                    name="cp"
                    placeholder="Code postal"
                    required
                    pattern="^\d{4,5}$"
            >
        </label>
        <button type="submit" class="button">Rechercher</button>
    </form>
    {% endif %}

    <!-- Choix de la ville si plusieurs communes -->
    {% if communes %}
        <form method="post" class="form">
            <p>Plusieurs communes trouvÃ©es :</p>
            <label>
                <select name="selected_city" required>
                    {% for ville in communes %}
                    <option value="{{ ville }}">{{ ville }}</option>
                    {% endfor %}
                </select>
            </label>
            <button type="submit" class="button">Voir la mÃ©tÃ©o</button>
        </form>
    {% endif %}

    <!-- Affichage mÃ©tÃ©o -->
    {% if city and weather %}
        <div class="datas">
            <div class="reloadContainer">
                <div class="reload"></div>
                <div class="betweenReload"><h2>{{ city }}</h2></div>
                <div class="reload">
                    <form method="post">
                        <input type="hidden" name="selected_city" value="{{ city }}">
                        <div class="reloadButtonContainer">
                            <button type="submit" class="reloadButton">ğŸ—˜</button>
                        </div>
                    </form>
                </div>
            </div>
            <p class="pInfos">MÃ©tÃ©o : {{ weather.description }}</p>
            <p class="pInfos">TempÃ©rature : {{ weather.temp }}Â°C</p>
            <p class="pInfos">Ressentie : {{ weather.ressentie }}Â°C</p>
            <p class="pInfos">HumiditÃ©e : {{ weather.humidite }}%</p>
            <p class="pInfos">Vent : {{ weather.vent }} km/h</p>
        </div>
    {% endif %}

    {% if error %}
        <p style="color:red">{{ error }}</p>
    {% endif %}

    {% if communes or city %}
        <form method="get" action="/" class="form">
            <button type="submit" class="button">ğŸ”™ Retour Ã  l'accueil</button>
        </form>
    {% endif %}

</body>
</html>